\documentclass{article}
\usepackage{amssymb,latexsym,amsmath,amsthm,mathtools}
\theoremstyle{definition}
\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{Algorithmus}{Algorithmus}
\newtheorem{example}[theorem]{Example}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{prop}[theorem]{Proposition}
\newtheorem{remark}[theorem]{Remark}
\numberwithin{equation}{theorem}
\numberwithin{figure}{theorem}

\newcommand{\Field}[1]{\ensuremath{\mathbb{F}_{#1}}}
\newcommand{\PolynomialRing}[2]{\ensuremath{#1[x_1,x_2,\ldots,x_{#2}]}}
\newcommand{\WLOG}{w.l.o.g}
\newcommand{\abs}[1]{\ensuremath{|#1|}}
\newcommand{\warningTheorem}{\emph{Warning Theorem}}
\newcommand{\polyDeg}[1]{deg(\ensuremath{#1})}
\newcommand{\numSumSubset}[2]{\ensuremath{(#1|#2)}}

\begin{document}
    \section{Proof of Kemnitz Conjecture}
    \begin{corollary}\label{cor:origCountingJ3p}
        If $\abs{J} = 3p-3$, then $1 - \numSumSubset{p - 1}{J} - \numSumSubset{p}{J} + \numSumSubset{2p-1}{J} + \numSumSubset{2p}{J}\equiv 0$
    \end{corollary}
    \begin{corollary}\label{cor:corCountingJ3p}
        If $|J| = 3p-2$, or $|J| = 3p-1$, then $1 - (p|J) + (2p|J)\equiv 0$ 
    \end{corollary}
    \begin{proof}
        Consider the polynomials in $\PolynomialRing{\Field{p}}{|J|}$,
        \WLOG, $|J| = 3p-2$, the case for $\abs{J} = 3p-1$ is analogous.

        \[\sum_{n=1}^{3p-3} x_n^{p-1}, \quad\sum_{n=1}^{3p-3}a_n x_n^{p-1} \hbox{and} \sum_{n = 1}^{3p-3}b_n x_n^{p-1}\]
        since the total degrees are $3p-3 < 3p-2$, the \warningTheorem{} is applicable.
        Their common zeros are counted as in Corollary~\ref{cor:origCountingJ3p},
        we obtain:
        \begin{alignat}{2}
            &\phantom{\Rightarrow}\quad\quad\quad&1 + (p-1)^p (p|J) + (p-1)^{2p}(2p-1|J) &\equiv 0 \\
            &\Rightarrow &1 - (p|J) + (2p|J) &\equiv 0
        \end{alignat}
    \end{proof}
    \begin{remark}
        Note that in the case where $\abs{J} = 3p-1$ or $3p-2$, the three polynomials we examined
        all have the same number of monomials, i.e. $\abs{J}$, diffrent from in the case in $\abs{J} = 3p-3$. This
        is due to the fact the total degrees of the three polynomials (denoted as $f_i, i \in \{1,2,3\}$) natuarlly satisfy $\sum_{i} \polyDeg{f_i} < \abs{J}$
    \end{remark}

    % \begin{corollary}
    %     If $\abs
    % \end{corollary}}
    \begin{corollary}
        If $\abs{X} = 4p-3$, then
        \begin{enumerate}
            \item $-1 + (p|X) - (2p|X) + (3p|X) \equiv 0$
            \item $(p-1|X) - (2p-1|X) + (3p-1|X) \equiv 0$
        \end{enumerate}
    \end{corollary}
    \begin{proof}
        Consider the polynomials $f_1,f_2,f_3$
        \[\sum_{n = 1}^{4p-3}x_n^{p-1}, \quad \sum_{n=1}^{4p-3}a_nx_n^{p-1} \hbox{and}\sum_{n=1}^{4p-3}b_n x_n^{p-1}\]
        The polynomials satisfy $\deg_i \polyDeg{f_i} < 4p-3$, so the \warningTheorem{} is applicable.
        By doing the analogous as in Corollary~\ref{cor:origCountingJ3p}, we obtain the first equation.
        
    \end{proof}
    \begin{corollary}\label{cor:4pM3_multiSum}
        If $\abs{X} = 4p-3$, then $3 - 2\numSumSubset{p-1}{X} - 2\numSumSubset{p}{X} + \numSumSubset{2p-1}{X} + \numSumSubset{2p}{X} \equiv 0$.
    \end{corollary}

    \begin{proof}
        We deduce from Corollary~\ref{cor:origCountingJ3p} that:
        \[\sum_I 1 - \numSumSubset{p-1}{I} - \numSumSubset{p}{I} + \numSumSubset{2p-1}{I} + \numSumSubset{2p}{I} \equiv 0,\]
        where the sum is over $I\subset X$, s.t, $\abs{I} = 3p-3$. 
        For a given subset $Y \subset X$,s.t $\abs{Y} = p$ and $\sum_{y\in Y} y \equiv 0$, we want to find out the number of pairs
        $(Y,I)$, s.t $Y\subset I, \abs{I} = 3p-3$. \\We could see that 
        \[\abs{\{(Y,I)| Y\subset I, \abs{I} = 3p-3}\} = \binom{3p-3}{2p-3},\]
        since once we have chosen $p$ elements $Y$, we need to further choose $\abs{I} - p = 3p-3 - p = 2p-3$ elements from
        total $\abs{X} - p = 4p-3 -p = 3p-3$ elements.
        Note that
        \[ \sum_{ \substack{Y \subset X,\\\sum_{y\in Y} y= 0}} \sum_{\substack{I,s.t. \\Y\subset I,\\\abs{I} = 3p-3}} 1\]
        \begin{align*}
            \binom{3p-3}{2p-3} \numSumSubset{p}{X} = \sum_{ \substack{Y\subset X\\ \sum_{y\in Y} y = 0}} \binom{3p-3}{2p-3} &= \sum_{ \substack{Y \subset X,\\\sum_{y\in Y} y= 0}} \sum_{\substack{I,s.t. \\Y\subset I,\\\abs{I} = 3p-3}} 1\\
                &=\sum_{\substack{I,s.t.\\\abs{I} = 3p-3}}\;\sum_{ \substack{Y \subset I,\\\sum_{y\in Y} y= 0}}  1 \\
                &= \sum_{I} \numSumSubset{p}{I}
        \end{align*}
        Doing similar calculation. We get
        \[\binom{4p-3}{3p-3} - \binom{3p-2}{2p-2}\numSumSubset{p-1}{X} \\ 
        + \binom{2p-2}{p-2}\numSumSubset{2p-1}{X} + \binom{2p-3}{p-3}\numSumSubset{2p}{X} \equiv 0\]
        We finally prove that 
        \[\binom{3p-3}{2p-3}\equiv 2\],
        because:
        \begin{align*}
            \binom{3p-3}{2p-3} &\equiv \frac{(3p-3) \cdots (3p-(p-1)) \cdot 2p \cdot (2p-1) \cdot (2p-2)}{p!}\\
            &\equiv \frac{(3p-3) \cdots (3p-(p-1)) \cdot 2 \cdot (2p-1) \cdot (2p-2)}{(p-1)!} \\
            &\equiv 2 \cdot(-1) \cdot (-3) (-4) \cdots (-(p-1)) \cdot(-1)\cdot(-2)\\
            &\equiv 2 \cdot(-1) \cdot(p-1)!\\
            &\equiv 2
        \end{align*}
        Similarly, 
    \end{proof}

    \begin{corollary}
        If $\abs{X} = 4p- 3$  and $\numSumSubset{p}{X} = 0$, then $\numSumSubset{p-1}{X} \equiv \numSumSubset{3p-1}{X}$.
    \end{corollary}
    \begin{proof}
        Let $\chi$ denote the number 
    \end{proof}
\end{document}